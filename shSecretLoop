--// Configuración
_G.tplayer = "Habbathehut" -- Jugador objetivo
getgenv().loopgoto = true

--// Servicios
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")

local player = Players.LocalPlayer

--// Auto Loop sin lag
task.spawn(function()
	while getgenv().loopgoto do
		RunService.Heartbeat:Wait()
		pcall(function()
			local target = Players[_G.tplayer]
			if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
				if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
					player.Character.HumanoidRootPart.CFrame = target.Character.HumanoidRootPart.CFrame
				end
			end
		end)
	end
end)

--// Anti AFK
player.Idled:Connect(function()
	VirtualUser:Button2Down(Vector2.new(), workspace.CurrentCamera.CFrame)
	task.wait(1)
	VirtualUser:Button2Up(Vector2.new(), workspace.CurrentCamera.CFrame)
end)

--// Anti Lag básico (remueve cosas pesadas del cliente)
task.spawn(function()
	while task.wait(5) do
		pcall(function()
			-- Elimina partículas
			for _, v in pairs(workspace:GetDescendants()) do
				if v:IsA("ParticleEmitter") or v:IsA("Trail") then
					v:Destroy()
				end
			end
			-- Desactiva sombras
			settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
			workspace.GlobalShadows = false
			-- Reduce distancia de render
			workspace.ExtentsCullingEnabled = true
		end)
	end
end)
